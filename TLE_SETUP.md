# TLE真实轨道数据设置指南

## 概述
本系统现在集成了真实的TLE（Two-Line Element）轨道数据，可以显示卫星的实时位置和轨道参数。

## 免费API获取步骤

### 1. N2YO.com API（推荐）
N2YO.com提供免费的卫星跟踪API，每小时限制：
- TLE数据获取：1000次
- 位置计算：1000次
- 轨道预测：100次

**获取步骤：**
1. 访问 https://www.n2yo.com/login/
2. 注册免费账户
3. 登录后访问个人资料页面
4. 向下滚动找到"Generate API Key"按钮
5. 生成你的唯一API密钥

**配置步骤：**
1. 打开 `src/services/tleService.ts`
2. 将第31行的 `API_KEY = 'DEMO_KEY'` 替换为你的API密钥：
   ```typescript
   const API_KEY = 'YOUR_API_KEY_HERE'
   ```

### 2. CelesTrak（备选）
CelesTrak是NASA支持的免费TLE数据源：
- 网站：https://celestrak.org/
- 提供最新的TLE数据文件
- 无需API密钥，但需要手动下载和解析

## 当前集成的卫星

系统目前支持以下真实卫星的TLE数据：

| 卫星名称 | NORAD ID | 类型 |
|---------|----------|------|
| 国际空间站 (ISS) | 25544 | 载人空间站 |
| 哈勃太空望远镜 | 20580 | 天文观测 |
| Starlink-1007 | 44713 | 通信卫星 |
| GPS BIIR-2 | 32711 | 导航卫星 |
| 天宫空间站 | 48274 | 载人空间站 |
| Sentinel-2A | 40697 | 地球观测 |

## 功能特性

### 1. 实时位置计算
- 基于最新TLE数据计算卫星精确位置
- 每30秒自动更新位置
- 显示经纬度、高度和速度

### 2. 真实轨道显示
- 绘制90分钟完整轨道路径
- 基于开普勒轨道力学计算
- 考虑地球自转和轨道倾角

### 3. 轨道参数分析
- 轨道倾角、偏心率
- 轨道周期、平均运动
- 近地点、远地点高度

### 4. 备用模式
- 当API不可用时自动切换到模拟模式
- 使用内置的备用TLE数据
- 确保系统始终可用

## 技术实现

### 使用的库
- `satellite.js`: 专业的轨道力学计算库
- 支持SGP4/SDP4轨道预测模型
- 高精度的坐标转换

### 数据缓存
- TLE数据缓存6小时，减少API调用
- 位置数据每30秒更新
- 智能错误处理和重试机制

### 坐标转换
- ECI (Earth-Centered Inertial) 坐标系
- 地理坐标 (经纬度高度)
- 3D可视化坐标系

## 使用说明

1. **启动系统**：运行 `npm start`
2. **选择卫星**：在卫星信息面板选择任一卫星
3. **查看实时数据**：面板会显示"TLE实时"标签表示使用真实数据
4. **观察轨道**：3D场景中的轨道线基于真实轨道路径绘制

## 故障排除

### API密钥问题
- 确保API密钥正确复制
- 检查N2YO账户是否激活
- 验证API调用次数是否超限

### 网络问题
- 系统会自动切换到备用模式
- 控制台会显示详细错误信息
- 备用TLE数据确保基本功能

### 性能优化
- TLE数据自动缓存，避免重复请求
- 位置更新频率可在代码中调整
- 轨道路径计算采用优化的采样率

## 扩展功能

### 添加新卫星
1. 在CelesTrak或N2YO查找NORAD ID
2. 更新 `SATELLITE_IDS` 配置
3. 添加到卫星列表中

### 自定义更新频率
修改 `SatelliteScene.tsx` 中的更新间隔：
```typescript
const interval = setInterval(updatePosition, 30000) // 30秒
```

### 高级轨道分析
可以扩展 `tleService.ts` 添加：
- 过境预测
- 可见性计算
- 轨道衰减分析

## 免费资源

- **N2YO API**: 每小时1000次免费调用
- **CelesTrak**: 完全免费的TLE数据
- **satellite.js**: 开源轨道计算库
- **NASA数据**: 公开的卫星目录数据

这个系统现在提供了专业级的卫星跟踪功能，完全基于真实的轨道数据！ 