# 🛰️ 真实轨道系统使用指南

## 🎯 系统概述

卫星可视化系统现已集成**真实TLE轨道数据**，使用专业的SGP4/SDP4轨道预测模型，显示卫星的真实位置和轨道路径。

## 🔄 轨道数据类型

### 1. 真实TLE轨道 (TLE)
- **数据源**: N2YO.com API + 备用TLE数据
- **精度**: 专业级，基于SGP4/SDP4模型
- **更新**: 实时计算，考虑轨道进动
- **标识**: 卫星标签显示 `(TLE)`

### 2. 简化圆形轨道 (SIM)  
- **数据源**: 几何计算
- **精度**: 近似，用于演示和备用
- **更新**: 匀速圆周运动
- **标识**: 卫星标签显示 `(SIM)`

## 🚀 支持的卫星

| 卫星名称 | NORAD ID | 轨道类型 | 预期模式 |
|---------|----------|----------|----------|
| 🏠 ISS | 25544 | 低地球轨道 | TLE |
| 🔭 Hubble | 20580 | 低地球轨道 | TLE |
| 📡 Starlink | 44713 | 低地球轨道 | TLE |
| 🗺️ GPS | 32711 | 中地球轨道 | TLE |
| 🏮 Tiangong | 48274 | 低地球轨道 | TLE |
| 🌍 Sentinel | 40697 | 太阳同步轨道 | TLE |

## 📊 真实轨道特性

### 轨道形状
- **椭圆轨道**: 真实的椭圆形状，不是圆形
- **轨道倾角**: 精确的倾斜角度
- **升交点**: 真实的轨道方向

### 运动特性
- **变速运动**: 近地点快，远地点慢
- **轨道进动**: 考虑地球扁率影响
- **真实周期**: 基于开普勒定律

### 坐标系统
- **惯性空间**: TLE轨道在惯性坐标系中
- **地球固定**: 地球纹理跟随自转
- **GMST时间**: 考虑格林威治恒星时

## 🎮 使用方法

### 1. 观察轨道加载
1. 启动系统后，观察控制面板的"轨道数据状态"
2. 等待卫星标签从 `(SIM)` 变为 `(TLE)`
3. 真实轨道线会替换简化的圆形轨道

### 2. 对比观察
- **简化轨道**: 完美的圆形，匀速运动
- **真实轨道**: 椭圆形状，变速运动
- **轨道倾角**: 真实的3D倾斜效果

### 3. 数据验证
- 卫星标签显示实时经纬度和高度
- 控制台输出详细的轨道参数
- 与专业卫星跟踪网站对比验证

## 🔧 技术实现

### TLE数据处理
```typescript
// 1. 获取TLE数据
const tleString = await tleService.getTLE(noradId)

// 2. 解析TLE为轨道参数
const satrec = satellite.twoline2satrec(tleLine1, tleLine2)

// 3. 实时位置计算
const positionAndVelocity = satellite.propagate(satrec, time)

// 4. 坐标转换
const geodeticCoords = satellite.eciToGeodetic(position, gmst)
```

### 坐标转换
```typescript
// 地理坐标 → 3D笛卡尔坐标
const phi = (90 - lat) * Math.PI / 180      // 纬度
const theta = lng * Math.PI / 180           // 经度
const x = radius * Math.sin(phi) * Math.cos(theta)
const y = radius * Math.cos(phi)
const z = radius * Math.sin(phi) * Math.sin(theta)
```

## 🎯 观察要点

### ISS国际空间站
- **轨道高度**: ~408km
- **轨道周期**: ~92分钟
- **轨道倾角**: 51.6°
- **特点**: 快速通过，明显的椭圆轨道

### Hubble太空望远镜
- **轨道高度**: ~547km
- **轨道周期**: ~95分钟
- **轨道倾角**: 28.5°
- **特点**: 相对稳定的轨道

### GPS卫星
- **轨道高度**: ~20,200km
- **轨道周期**: ~12小时
- **轨道倾角**: 55°
- **特点**: 高轨道，运动缓慢

## 🚨 故障排除

### TLE数据未加载
1. **检查网络连接**: 确保能访问N2YO API
2. **查看控制台**: 观察TLE加载日志
3. **等待备用数据**: 系统会自动使用内置TLE
4. **刷新页面**: 重新尝试加载

### 轨道显示异常
1. **检查标签**: 确认显示 `(TLE)` 模式
2. **观察运动**: 真实轨道是变速的
3. **对比简化模式**: 切换显示对比差异
4. **查看调试信息**: 控制台输出详细参数

### 性能问题
1. **降低时间速度**: 减少计算频率
2. **关闭部分轨道**: 只显示感兴趣的卫星
3. **刷新页面**: 清理内存缓存

## 📈 数据精度

### 位置精度
- **理论精度**: ±1-5km（取决于TLE新鲜度）
- **显示精度**: 3D场景中约±0.1单位
- **时间精度**: 考虑轨道进动和大气阻力

### 更新频率
- **TLE缓存**: 6小时更新一次
- **位置计算**: 实时计算（60倍加速）
- **轨道路径**: 15秒间隔采样点

## 🌟 高级功能

### 视角模式
- **惯性空间视角**: 观察地球自转
- **地球固定视角**: 跟随地球旋转
- **自由视角**: 鼠标控制观察角度

### 数据导出
- 控制台输出详细轨道参数
- 实时位置和速度数据
- 与专业软件兼容的格式

### 教育应用
- 对比真实轨道与理想轨道
- 观察轨道力学原理
- 验证开普勒定律

## 🔮 未来增强

- [ ] 轨道预测功能
- [ ] 历史轨道回放
- [ ] 多卫星轨道交互
- [ ] 地面站可见性分析
- [ ] 轨道机动模拟

---

**注意**: 真实轨道数据需要网络连接和API支持。离线时系统会自动切换到备用TLE数据。 